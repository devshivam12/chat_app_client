const __vite__fileDeps=["assets/ConfirmDeleteDialog-B1p1rMCV.js","assets/index-DLu291oi.js","assets/DialogTitle-Bm_JYwat.js","assets/Modal-CuAh2ZEk.js","assets/Menu-wfcDCIto.js","assets/Typography-BYTqXvty.js","assets/Button-CO1hZCK-.js","assets/AddMemberDialog-ZWU7VywS.js","assets/UserItem-C42tBIlI.js","assets/ListItem-Do_Y8ozV.js","assets/isMuiElement-BLZikN05.js","assets/Avatar-DIds3tWp.js","assets/Box--JEoGVwv.js","assets/Delete-CS-KR33e.js","assets/Menu-CI0hXIeC.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{j as e,r as o,W as _,p as X,u as Y,ac as Z,f as ee,ad as re,q as se,ae as oe,a6 as g,S as d,b as te,U as ae,af as ne,ag as ie,M as le,ah as ce,ai as de}from"./index-DLu291oi.js";import{A as me}from"./AvatarCard-DRlPtZyT.js";import{U as pe}from"./UserItem-C42tBIlI.js";import{b as h,a as ue,D as xe,M as ge}from"./Menu-CI0hXIeC.js";import{c as j,T as x}from"./Typography-BYTqXvty.js";import{C as he}from"./CircularProgress-DXbiuRRF.js";import{B as E}from"./Modal-CuAh2ZEk.js";import{B as je,I as u}from"./Box--JEoGVwv.js";import{T as fe}from"./Tooltip-D3jhxpGK.js";import{T as be}from"./TextField-DU2Yq45b.js";import{B as S}from"./Button-CO1hZCK-.js";import{D as ve,A as Me}from"./Delete-CS-KR33e.js";import"./Menu-wfcDCIto.js";import"./Avatar-DIds3tWp.js";import"./ListItem-Do_Y8ozV.js";import"./isMuiElement-BLZikN05.js";const De=j(e.jsx("path",{d:"M9 16.2 4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4z"}),"Done"),Ie=j(e.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit"),ke=j(e.jsx("path",{d:"M21 11H6.83l3.58-3.59L9 6l-6 6 6 6 1.41-1.41L6.83 13H21z"}),"KeyboardBackspace"),Ce=o.lazy(()=>_(()=>import("./ConfirmDeleteDialog-B1p1rMCV.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),Ge=o.lazy(()=>_(()=>import("./AddMemberDialog-ZWU7VywS.js"),__vite__mapDeps([7,1,8,9,4,3,10,11,5,12,13,14,2,6]))),$e=()=>{var G,y;const a=X(),n=Y(),r=Z()[0].get("group");console.log(r);const{isAddMember:i}=ee(s=>s.misc),t=re(""),l=se({chatId:r,populate:!0},{skip:!r}),[A,f]=h(ne),[B,w]=h(ie),[N,Ee]=h(le),[z,b]=o.useState(!1),[R,m]=o.useState(!1),[v,p]=o.useState(""),[M,c]=o.useState(""),[D,I]=o.useState(!1),[T,k]=o.useState([]),H=[{isError:t.isError,error:t.error},{isError:l.isErrorerror,error:l.error}];ue(H),o.useEffect(()=>{const s=l.data;return s&&(p(s.chat.name),c(s.chat.name),k(s.chat.members)),()=>{p(""),c(""),k([]),m(!1)}},[l.data]);const U=()=>{a("/")},F=()=>{b(s=>!s)},P=()=>{b(!1)},V=()=>{m(!1),A("Updating Group Name...",{chatId:r,name:M})},O=()=>{I(!0)},C=()=>{I(!1)},$=()=>{n(de(!0))},K=()=>{N("Deleting Group...",r),C(),a("/groups")},Q=s=>{B("Removing Member....",{chatId:r,userId:s})};o.useEffect(()=>(r&&(p(`Group Name ${r}`),c(`Group Name ${r}`)),()=>{p(""),c(""),m(!1)}),[r]);const W=e.jsxs(e.Fragment,{children:[e.jsx(je,{sx:{display:{xs:"block",sm:"none"},position:"fixed",right:"1rem",top:"1rem"},children:e.jsx(u,{onClick:F,children:e.jsx(ge,{})})}),e.jsx(fe,{title:"back",children:e.jsx(u,{sx:{position:"absolute",top:"2rem",left:"2rem",color:"white",bgcolor:ce,":hover":{bgcolor:"rgba(0,0,0,0.7)"}},onClick:U,children:e.jsx(ke,{})})})]}),q=e.jsx(d,{alignItems:"center",spacing:"1rem",justifyContent:"center",padding:"3rem",direction:"row",children:R?e.jsxs(e.Fragment,{children:[e.jsx(be,{value:M,onChange:s=>c(s.target.value)}),e.jsx(u,{onClick:V,disabled:f,children:e.jsx(De,{})})]}):e.jsxs(e.Fragment,{children:[e.jsx(x,{variant:"h4",children:v}),e.jsx(u,{disabled:f,onClick:()=>m(!0),children:e.jsx(Ie,{})})]})}),J=e.jsxs(d,{direction:{sm:"row",xs:"column-reverse"},spacing:"1rem",p:{xs:"0",sm:"1rem",md:"1rem 4rem"},children:[e.jsx(S,{color:"error",variant:"outlined",startIcon:e.jsx(ve,{}),size:"large",onClick:O,children:"Delete Group"}),e.jsx(S,{size:"large",startIcon:e.jsx(Me,{}),variant:"contained",onClick:$,children:"Add Memeber"})]});return t.isLoading?e.jsx(oe,{}):e.jsxs(g,{container:!0,height:"100vh",children:[e.jsx(g,{item:!0,sx:{display:{xs:"none",sm:"block"}},sm:4,children:e.jsx(L,{myGroups:(G=t==null?void 0:t.data)==null?void 0:G.groups,chatId:r})}),e.jsxs(g,{item:!0,xs:12,sm:8,sx:{display:"flex",flexDirection:"column",position:"relative",alignItems:"center",padding:"1rem 3rem"},children:[W,v&&e.jsxs(e.Fragment,{children:[q,e.jsx(x,{margin:"2rem",alignSelf:"flex-start",variant:"body1",children:"Members"}),e.jsx(d,{maxWidth:"45rem",width:"100%",boxSizing:"border-box",padding:{sm:"1rem",xs:"0",md:"1rem 4rem"},spacing:"2rem",height:"50vh",overflow:"auto",children:w?e.jsx(he,{}):T.map(s=>e.jsx(pe,{user:s,isAdded:!0,styling:{boxShadow:"0 0 0.5rem rgba(0,0,0,0.2)",padding:"1rem 2rem",borderRadius:"1rem"},handler:Q},s._id))}),J]})]}),i&&e.jsx(o.Suspense,{fallback:e.jsx(E,{open:!0}),children:e.jsx(Ge,{chatId:r})}),D&&e.jsx(o.Suspense,{fallback:e.jsx(E,{open:!0}),children:e.jsx(Ce,{handleClose:C,open:D,deleteHandler:K})}),e.jsx(xe,{sx:{display:{xs:"block",sm:"none"}},onClose:P,open:z,children:e.jsx(L,{w:"50vw",myGroups:(y=t==null?void 0:t.data)==null?void 0:y.groups,chatId:r})})]})},L=({w:a="100%",myGroups:n=[],chatId:r})=>e.jsx(d,{width:a,padding:"2rem",sx:{backgroundImage:te,height:"100vh",overflow:"auto"},children:n.length>0?n.map(i=>e.jsx(ye,{group:i,chatId:r},i._id)):e.jsx(x,{textAlign:"center",padding:"1rem",children:"No groups"})}),ye=o.memo(({group:a,chatId:n})=>{const{name:r,avatar:i,_id:t}=a;return e.jsx(ae,{to:`?group=${t}`,onClick:l=>{n===t&&l.preventDefault()},children:e.jsxs(d,{direction:"row",spacing:"1rem",alignItems:"center",children:[e.jsx(me,{avatar:i}),e.jsx(x,{style:{color:"black",fontSize:"1.5rem",marginLeft:"1rem"},children:r})]})})});export{$e as default};
